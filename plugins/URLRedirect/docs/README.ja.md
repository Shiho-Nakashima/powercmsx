# URLRedirectプラグイン

## 概要

URLリダイレクト設定を管理します。ダイナミックパブリッシングの設定が有効で、404の時「pt\-view\.php」へリクエストが渡る必要があります。  
リダイレクトのタイミングはベースネームが「404\-error」のビューによるエラー処理の前に行われるため、環境変数「error_document404」によるエラーページの設定がされている時には動作させることができません。

## 設置とインストール

- システムのプラグインの管理画面で、URLRedirectにチェックを入れて有効化します。
- スキーマ管理画面から「redirect\_map」モデルを選択してアップグレードします。

## リダイレクト設定

- システムオブジェクトメニューから「リダイレクト設定」を選択し、一覧画面に遷移します。
- 「新しいリダイレクト設定」をクリックして作成画面に遷移します。

※ 設定は適切なスコープ\(「pt\-view\.php」で指定された workspace\_id のスコープ\)に作成する必要があります。

### 入力内容と指定可能な項目

- コンディション : 必須です。相対URL\(ルート相対パス\)、URL、正規表現のいずれかを入力します。
- リダイレクト先 : 必須です。リダイレクト先の URLまたは正規表現の置換文字列\(replacement\)を指定します。
- タイプ : 必須です。相対URL、URL、正規表現のいずれかを選択します。
- HTTPステータス : 必須です。301\(恒久的リダイレクト\)か、302\(一時的リダイレクト\)かを選択します。
- ステータス : 有効・無効を選択します。

※ 正規表現のデリミタは「!」です。環境変数「urlredirect\_delimiter」で別の文字に変更することができます。  
※ 相対URL → URL → 正規表現の順で対象の設定を探します。可能な場合は相対URLを指定してください。  
※ 正規表現のパターンマッチは、「リダイレクト先」の指定文字列が長いものから順に処理されます。