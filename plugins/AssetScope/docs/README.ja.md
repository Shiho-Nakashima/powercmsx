# AssetScopeプラグイン

## 概要

スコープ毎に他のスコープのアセットを利用可能にします。このプラグインには PowerCMS X ver\.3\.3以上で動作します。

## プラグイン設定

他のスコープのアセットを利用したいスペース\(またはシステム\)のプラグイン設定で、スコープを選択して設定を保存してください。  
「エディタ挿入時のカラム」に追加したカラムを設定することで、エディタ挿入時に別のカラムの値を代替テキスト/ラベルの初期値に指定できるようになります。

## 設定後の影響

設定を行うと、以下のように振る舞いが変更されます。

- 一覧画面、オブジェクトの作成画面を開こうとすると、設定したスコープの画面にリダイレクトされます。
- 記事やページ、その他アセットへのリレーションが設定されている作成・編集画面のカラム、ファイルや画像型のフィールドの選択ボタン、新規作成ボタンが設定したスコープの一覧、作成画面を呼び出すようになります。
- 上記のボタンの表示・非表示については設定したスコープのアセットに対する権限をチェックするようになります\(すでに作成されたフィールドについてはカスタマイズしない限り変更されません\)。

## 既存のアセットへの影響

他のスコープのアセットを利用するように設定したスコープのアセットには影響はありませんが、既存のアセットのスコープを変更したい場合、以下ように引数を指定して worker.phpを実行してください。

    cd /path/to/powercmsx; sudo -u apache php tools/worker.php --task_ids assetscope_move_assets

- パスや実行権限については各環境で適切なものを指定してください。
- データベースや実ファイルのバックアップをとってから実行してください。
- 指定元スコープのサイト・パスが、指定先スコープのサイト・パスと一致しているか、前方一致していない時、ファイルは移動されず、エラーがログに保存されます。