var Editor=function(a){"use strict";function n(n){return-1!==t.map(function(n){return n.toLowerCase()}).indexOf(n.toLowerCase())}function e(){return{listeners:[],scriptId:h("tiny-script"),scriptLoaded:!1}}function g(){var n="undefined"!=typeof window?window:global;return n&&n.tinymce?n.tinymce:null}var u,y=function(){return(y=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)},t=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],C=function(t,o,r){Object.keys(o).filter(n).forEach(function(n){var e=o[n];"function"==typeof e&&("onInit"===n?e(t,r):r.on(n.substring(2),function(n){return e(n,r)}))})},S=function(t,n,o,e){var r=t.modelEvents||null,r=Array.isArray(r)?r.join(" "):r;a.watch(e,function(n,e){o&&"string"==typeof n&&n!==e&&n!==o.getContent({format:t.outputFormat})&&o.setContent(n)}),o.on(r||"change input undo redo",function(){n.emit("update:modelValue",o.getContent({format:t.outputFormat}))})},o=0,h=function(n){var e=Date.now();return n+"_"+Math.floor(1e9*Math.random())+ ++o+String(e)},b=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},w=(u=e(),{load:function(n,e,t){function o(){i.removeEventListener("load",o),r()}var r,i;u.scriptLoaded?t():(u.listeners.push(t),n.getElementById(u.scriptId)||(t=u.scriptId,e=e,r=function(){u.listeners.forEach(function(n){return n()}),u.scriptLoaded=!0},(i=(n=n).createElement("script")).referrerPolicy="origin",i.type="application/javascript",i.id=t,i.src=e,i.addEventListener("load",o),n.head&&n.head.appendChild(i)))},reinitialize:function(){u=e()}}),r={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}};return a.defineComponent({props:r,setup:function(u,l){function t(){n=p;var n,e,a=f?function(){return null!=c&&c.value?c.value:""}:function(){return n?v:m},t=y(y({},o),{readonly:u.disabled,target:r.value,plugins:(t=o.plugins,e=u.plugins,b(t).concat(b(e))),toolbar:u.toolbar||o.toolbar,inline:s,setup:function(i){(d=i).on("init",function(n){return n=n,e=u,t=l,r=c,(o=i).setContent(a()),t.attrs["onUpdate:modelValue"]&&S(e,t,o,r),void C(n,t.attrs,o);var e,t,o,r}),"function"==typeof o.setup&&o.setup(i)}});null!==(e=r.value)&&"textarea"===e.tagName.toLowerCase()&&(r.value.style.visibility=""),g().init(t),p=!1}var o=u.init?y({},u.init):{},n=a.toRefs(u),e=n.disabled,c=n.modelValue,n=n.tagName,r=a.ref(null),d=null,i=u.id||h("tiny-vue"),s=u.init&&u.init.inline||u.inline,f=!!l.attrs["onUpdate:modelValue"],p=!0,v=u.initialValue||"",m="";a.watch(e,function(n){var e;null!==d&&("function"==typeof(null==(e=d.mode)?void 0:e.set)?d.mode.set(n?"readonly":"design"):d.setMode(n?"readonly":"design"))}),a.watch(n,function(n){var e;f||(m=d.getContent()),null!=(e=g())&&e.remove(d),a.nextTick(t)}),a.onMounted(function(){var n,e;null!==g()?t():r.value&&r.value.ownerDocument&&(n=u.cloudChannel||"6",e=u.apiKey||"no-api-key",e=null==u.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(e,"/tinymce/").concat(n,"/tinymce.min.js"):u.tinymceScriptSrc,w.load(r.value.ownerDocument,e,t))}),a.onBeforeUnmount(function(){null!==g()&&g().remove(d)}),s||(a.onActivated(function(){p||t()}),a.onDeactivated(function(){var n;f||(m=d.getContent()),null!=(n=g())&&n.remove(d)}));return l.expose({rerender:function(n){var e;m=d.getContent(),null!=(e=g())&&e.remove(d),o=y(y({},o),n),a.nextTick(t)}}),function(){return s?(n=a.h,e=r,t=u.tagName,n(t||"div",{id:i,ref:e})):(0,a.h)("textarea",{id:i,visibility:"hidden",ref:r});var n,e,t}}})}(Vue);
